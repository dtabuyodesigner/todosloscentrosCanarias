<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Directorio Avanzado de Centros Educativos - Canarias</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .sortable:hover { background-color: #f0f4f8; cursor: pointer; }
        .sort-asc::after { content: ' ▲'; font-size: 0.8em; }
        .sort-desc::after { content: ' ▼'; font-size: 0.8em; }
        #modal-backdrop { background-color: rgba(0,0,0,0.5); }
        .modal-enter { opacity: 0; transform: scale(0.95); }
        .modal-enter-active { opacity: 1; transform: scale(1); }
        .modal-leave-active { opacity: 0; transform: scale(0.95); }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex flex-col min-h-screen">

    <div class="container mx-auto p-4 md:p-8 flex-grow">
        <header class="bg-white shadow-md rounded-xl p-6 mb-8 text-center">
            <h1 class="text-4xl font-bold text-blue-700">Directorio Avanzado de Centros Educativos</h1>
            <p class="text-gray-500 mt-2">Canarias</p>
        </header>

        <div class="bg-white shadow-md rounded-xl p-6 mb-8">
            <h2 class="text-xl font-semibold mb-4 text-gray-700">Controles de Búsqueda</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <input type="text" id="search-input" placeholder="Buscar por nombre o código..." class="lg:col-span-1 w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                <select id="filter-isla" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    <option value="all">Todas las Islas</option>
                </select>
                <select id="filter-municipio" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" disabled>
                    <option value="all">Todos los Municipios</option>
                </select>
                <select id="filter-zona" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" disabled>
                    <option value="all">Todas las Zonas</option>
                </select>
            </div>
        </div>

        <div class="bg-white shadow-md rounded-xl overflow-hidden">
            <div class="p-4 flex justify-between items-center border-b">
                 <p id="results-count" class="text-gray-600"></p>
                 <div class="flex items-center space-x-2">
                    <label for="rows-per-page" class="text-sm">Filas:</label>
                    <select id="rows-per-page" class="p-1 border border-gray-300 rounded-lg">
                        <option value="10">10</option>
                        <option value="25" selected>25</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                    </select>
                </div>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-sm text-left">
                    <thead class="bg-gray-50 text-xs text-gray-700 uppercase">
                        <tr>
                            <th class="p-4 sortable" data-column="Denominacion">Denominación</th>
                            <th class="p-4 sortable" data-column="Municipio">Municipio</th>
                            <th class="p-4 sortable" data-column="Isla">Isla</th>
                            <th class="p-4 sortable" data-column="distancia_aeropuerto_km">Distancia Aerop.</th>
                            <th class="p-4">Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        </tbody>
                </table>
            </div>
            <div id="pagination-controls" class="p-4 flex justify-center items-center space-x-4">
                </div>
        </div>
    </div>
    
    <div id="modal" class="fixed inset-0 z-50 hidden items-center justify-center transition-opacity duration-300">
        <div id="modal-backdrop" class="fixed inset-0 bg-black opacity-50"></div>
        <div id="modal-content" class="bg-white rounded-lg shadow-2xl z-10 w-11/12 md:w-1/2 max-w-2xl transform transition-all duration-300 scale-95 opacity-0">
            <div class="p-6 border-b flex justify-between items-center">
                <h2 id="modal-title" class="text-2xl font-bold text-gray-800"></h2>
                <button id="modal-close-btn" class="text-gray-500 hover:text-gray-800 text-3xl">×</button>
            </div>
            <div id="modal-body" class="p-6 space-y-4">
                </div>
        </div>
    </div>
    
    <footer class="text-center py-4 mt-8">
        <p class="text-sm text-gray-500">Creado por Daniel Tabuyo de las Peñas <img src="https://ibb.co/WWCbhY23" alt="Foto de Lisboa" class="inline-block h-6 w-6 rounded-full ml-1 align-middle"></p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- INICIO DE LA BASE DE DATOS DE CENTROS ---
        // PEGA AQUÍ EL JSON COMPLETO
        const schoolData =[
    {
        "Codigo": "35003357",
        "Denominacion": "CEIP ZURBARÁN",
        "Municipio": "TELDE",
        "Direccion": "C/ ZURBARÁN, 10",
        "Telefono": "928-303262",
        "CorreoElectronico": "35003357@gobiernodecanarias.org",
        "Isla": "GRAN CANARIA",
        "Naturaleza": "Público",
        "Zona": "Este",
        "aeropuerto": "LPA",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38000513",
        "Denominacion": "CEIP ADEJE",
        "Municipio": "ADEJE",
        "Direccion": "C/ GRAN BRETAÑA, 12",
        "Telefono": "922-789123",
        "CorreoElectronico": "38000513@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 20
    },
    {
        "Codigo": "38000525",
        "Denominacion": "CEIP AGAETE",
        "Municipio": "AGAETE",
        "Direccion": "C/ EL VALLE, 8",
        "Telefono": "928-898765",
        "CorreoElectronico": "38000525@gobiernodecanarias.org",
        "Isla": "GRAN CANARIA",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "LPA",
        "distancia_aeropuerto_km": 50
    },
    {
        "Codigo": "38000537",
        "Denominacion": "CEIP ALCALÁ",
        "Municipio": "GUÍA DE ISORA",
        "Direccion": "C/ ALCALÁ, 10",
        "Telefono": "922-850123",
        "CorreoElectronico": "38000537@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 30
    },
    {
        "Codigo": "38000549",
        "Denominacion": "CEIP ALDEA BLANCA",
        "Municipio": "SAN MIGUEL DE ABONA",
        "Direccion": "C/ ALDEA BLANCA, 12",
        "Telefono": "922-760543",
        "CorreoElectronico": "38000549@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 10
    },
    {
        "Codigo": "38000550",
        "Denominacion": "CEIP ALMACIGO",
        "Municipio": "VALLEHERMOSO",
        "Direccion": "C/ ALMACIGO, 8",
        "Telefono": "922-800123",
        "CorreoElectronico": "38000550@gobiernodecanarias.org",
        "Isla": "LA GOMERA",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "GMZ",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38000562",
        "Denominacion": "CEIP ALONSO NARANJO",
        "Municipio": "SANTA CRUZ DE TENERIFE",
        "Direccion": "C/ ALONSO NARANJO, 10",
        "Telefono": "922-478812",
        "CorreoElectronico": "38000562@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Este",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38000574",
        "Denominacion": "CEIP ANTONIO DEL VALLE",
        "Municipio": "PUERTO DE LA CRUZ",
        "Direccion": "C/ ANTONIO DEL VALLE, 12",
        "Telefono": "922-380123",
        "CorreoElectronico": "38000574@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38000586",
        "Denominacion": "CEIP ARICO",
        "Municipio": "ARICO",
        "Direccion": "C/ ARICO, 8",
        "Telefono": "922-768123",
        "CorreoElectronico": "38000586@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38000598",
        "Denominacion": "CEIP ARÍSTIDES HERNÁNDEZ",
        "Municipio": "SANTA CRUZ DE TENERIFE",
        "Direccion": "C/ ARÍSTIDES HERNÁNDEZ, 10",
        "Telefono": "922-478813",
        "CorreoElectronico": "38000598@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Este",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38000604",
        "Denominacion": "CEIP ARMAS",
        "Municipio": "ADEJE",
        "Direccion": "C/ ARMAS, 12",
        "Telefono": "922-789124",
        "CorreoElectronico": "38000604@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 20
    },
    {
        "Codigo": "38000616",
        "Denominacion": "CEIP ARUCAS",
        "Municipio": "ARUCAS",
        "Direccion": "C/ ARUCAS, 8",
        "Telefono": "928-600123",
        "CorreoElectronico": "38000616@gobiernodecanarias.org",
        "Isla": "GRAN CANARIA",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "LPA",
        "distancia_aeropuerto_km": 35
    },
    {
        "Codigo": "38000628",
        "Denominacion": "CEIP AURELIO QUINTANA",
        "Municipio": "PUERTO DE LA CRUZ",
        "Direccion": "C/ AURELIO QUINTANA, 10",
        "Telefono": "922-380124",
        "CorreoElectronico": "38000628@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38000641",
        "Denominacion": "CEIP BARRANCO DE LAS LAJAS",
        "Municipio": "TACORONTE",
        "Direccion": "C/ BARRANCO DE LAS LAJAS, 12",
        "Telefono": "922-560123",
        "CorreoElectronico": "38000641@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38000653",
        "Denominacion": "CEIP BARRANCO HONDO",
        "Municipio": "CANDELARIA",
        "Direccion": "C/ BARRANCO HONDO, 8",
        "Telefono": "922-500123",
        "CorreoElectronico": "38000653@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Este",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38000665",
        "Denominacion": "CEIP BARRIO DE LA ALEGRÍA",
        "Municipio": "SANTA CRUZ DE TENERIFE",
        "Direccion": "C/ BARRIO DE LA ALEGRÍA, 10",
        "Telefono": "922-478814",
        "CorreoElectronico": "38000665@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Este",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38000677",
        "Denominacion": "CEIP BENCOMO",
        "Municipio": "LOS REALEJOS",
        "Direccion": "C/ BENCOMO, 12",
        "Telefono": "922-760260",
        "CorreoElectronico": "38000677@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 30
    },
    {
        "Codigo": "38000689",
        "Denominacion": "CEIP BENHOARE",
        "Municipio": "SANTA CRUZ DE LA PALMA",
        "Direccion": "C/ BENHOARE, 8",
        "Telefono": "922-410123",
        "CorreoElectronico": "38000689@gobiernodecanarias.org",
        "Isla": "LA PALMA",
        "Naturaleza": "Público",
        "Zona": "Este",
        "aeropuerto": "SPC",
        "distancia_aeropuerto_km": 10
    },
    {
        "Codigo": "38000690",
        "Denominacion": "CEIP BENTENAHUI",
        "Municipio": "TÍAS",
        "Direccion": "C/ BENTENAHUI, 10",
        "Telefono": "928-930606",
        "CorreoElectronico": "38000690@gobiernodecanarias.org",
        "Isla": "LANZAROTE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "ACE",
        "distancia_aeropuerto_km": 10
    },
    {
        "Codigo": "38000707",
        "Denominacion": "CEIP BUENAVISTA",
        "Municipio": "BUENAVISTA DEL NORTE",
        "Direccion": "C/ BUENAVISTA, 12",
        "Telefono": "922-129123",
        "CorreoElectronico": "38000707@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 60
    },
    {
        "Codigo": "38000719",
        "Denominacion": "CEIP CABO BLANCO",
        "Municipio": "ARONA",
        "Direccion": "C/ CABO BLANCO, 8",
        "Telefono": "922-592183",
        "CorreoElectronico": "38000719@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38000720",
        "Denominacion": "CEIP CALETILLAS",
        "Municipio": "CANDELARIA",
        "Direccion": "C/ CALETILLAS, 10",
        "Telefono": "922-500124",
        "CorreoElectronico": "38000720@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Este",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38000732",
        "Denominacion": "CEIP CALLAO",
        "Municipio": "ARONA",
        "Direccion": "C/ CALLAO, 12",
        "Telefono": "922-592184",
        "CorreoElectronico": "38000732@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38000744",
        "Denominacion": "CEIP CAMINO DE LA VILLA",
        "Municipio": "LA OROTAVA",
        "Direccion": "C/ CAMINO DE LA VILLA, 8",
        "Telefono": "922-330123",
        "CorreoElectronico": "38000744@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38000756",
        "Denominacion": "CEIP CANDELARIA",
        "Municipio": "CANDELARIA",
        "Direccion": "C/ CANDELARIA, 10",
        "Telefono": "922-500125",
        "CorreoElectronico": "38000756@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Este",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38000768",
        "Denominacion": "CEIP CARRILLO",
        "Municipio": "SANTA CRUZ DE TENERIFE",
        "Direccion": "C/ CARRILLO, 12",
        "Telefono": "922-478815",
        "CorreoElectronico": "38000768@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Este",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38000781",
        "Denominacion": "CEIP CÉSAR MANRIQUE",
        "Municipio": "ARRECIFE",
        "Direccion": "C/ CÉSAR MANRIQUE, 8",
        "Telefono": "928-499601",
        "CorreoElectronico": "38000781@gobiernodecanarias.org",
        "Isla": "LANZAROTE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "ACE",
        "distancia_aeropuerto_km": 5
    },
    {
        "Codigo": "38000793",
        "Denominacion": "CEIP CHACONA",
        "Municipio": "GRANADILLA DE ABONA",
        "Direccion": "C/ CHACONA, 10",
        "Telefono": "922-602912",
        "CorreoElectronico": "38000793@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 10
    },
    {
        "Codigo": "38000800",
        "Denominacion": "CEIP CHIGUERGUE",
        "Municipio": "GUÍA DE ISORA",
        "Direccion": "C/ CHIGUERGUE, 12",
        "Telefono": "922-850124",
        "CorreoElectronico": "38000800@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 30
    },
    {
        "Codigo": "38000811",
        "Denominacion": "CEIP CHIMISAY",
        "Municipio": "PUERTO DE LA CRUZ",
        "Direccion": "C/ CHIMISAY, 8",
        "Telefono": "922-380125",
        "CorreoElectronico": "38000811@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38000823",
        "Denominacion": "CEIP CHIO",
        "Municipio": "GUÍA DE ISORA",
        "Direccion": "C/ CHIO, 10",
        "Telefono": "922-850125",
        "CorreoElectronico": "38000823@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 30
    },
    {
        "Codigo": "38000835",
        "Denominacion": "CEIP COSTA TEGUISE",
        "Municipio": "TEGUISE",
        "Direccion": "C/ COSTA TEGUISE, 12",
        "Telefono": "928-591965",
        "CorreoElectronico": "38000835@gobiernodecanarias.org",
        "Isla": "LANZAROTE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "ACE",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38000847",
        "Denominacion": "CEIP CRUZ DE PIEDRA",
        "Municipio": "GRANADILLA DE ABONA",
        "Direccion": "C/ CRUZ DE PIEDRA, 8",
        "Telefono": "922-602913",
        "CorreoElectronico": "38000847@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 10
    },
    {
        "Codigo": "38000859",
        "Denominacion": "CEIP CUEVA DEL VIENTO",
        "Municipio": "ICOD DE LOS VINOS",
        "Direccion": "C/ CUEVA DEL VIENTO, 10",
        "Telefono": "922-760220",
        "CorreoElectronico": "38000859@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 45
    },
    {
        "Codigo": "38000860",
        "Denominacion": "CEIP EL BOCAL",
        "Municipio": "ARONA",
        "Direccion": "C/ EL BOCAL, 12",
        "Telefono": "922-592185",
        "CorreoElectronico": "38000860@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38000872",
        "Denominacion": "CEIP EL CARDONAL",
        "Municipio": "SAN CRISTÓBAL DE LA LAGUNA",
        "Direccion": "C/ EL CARDONAL, 8",
        "Telefono": "922-250123",
        "CorreoElectronico": "38000872@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 10
    },
    {
        "Codigo": "38000884",
        "Denominacion": "CEIP EL CARMEN",
        "Municipio": "SANTA CRUZ DE TENERIFE",
        "Direccion": "C/ EL CARMEN, 10",
        "Telefono": "922-478816",
        "CorreoElectronico": "38000884@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Este",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38000896",
        "Denominacion": "CEIP EL DRAGO",
        "Municipio": "ICOD DE LOS VINOS",
        "Direccion": "C/ EL DRAGO, 12",
        "Telefono": "922-760221",
        "CorreoElectronico": "38000896@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 45
    },
    {
        "Codigo": "38000902",
        "Denominacion": "CEIP EL FARO",
        "Municipio": "PUERTO DE LA CRUZ",
        "Direccion": "C/ EL FARO, 8",
        "Telefono": "922-380126",
        "CorreoElectronico": "38000902@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38000914",
        "Denominacion": "CEIP EL MÉDANO",
        "Municipio": "GRANADILLA DE ABONA",
        "Direccion": "C/ EL MÉDANO, 10",
        "Telefono": "922-602914",
        "CorreoElectronico": "38000914@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 10
    },
    {
        "Codigo": "38000926",
        "Denominacion": "CEIP EL PASO",
        "Municipio": "EL PASO",
        "Direccion": "C/ EL PASO, 12",
        "Telefono": "922-485123",
        "CorreoElectronico": "38000926@gobiernodecanarias.org",
        "Isla": "LA PALMA",
        "Naturaleza": "Público",
        "Zona": "Oeste",
        "aeropuerto": "SPC",
        "distancia_aeropuerto_km": 20
    },
    {
        "Codigo": "38000938",
        "Denominacion": "CEIP EL PUERTO",
        "Municipio": "PUERTO DE LA CRUZ",
        "Direccion": "C/ EL PUERTO, 8",
        "Telefono": "922-380127",
        "CorreoElectronico": "38000938@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38000941",
        "Denominacion": "CEIP EL ROQUE",
        "Municipio": "SAN MIGUEL DE ABONA",
        "Direccion": "C/ EL ROQUE, 10",
        "Telefono": "922-760544",
        "CorreoElectronico": "38000941@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 10
    },
    {
        "Codigo": "38000953",
        "Denominacion": "CEIP EL SAUZAL",
        "Municipio": "EL SAUZAL",
        "Direccion": "C/ EL SAUZAL, 12",
        "Telefono": "922-560124",
        "CorreoElectronico": "38000953@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38000965",
        "Denominacion": "CEIP EL TEJAR",
        "Municipio": "VILAFLOR",
        "Direccion": "C/ EL TEJAR, 8",
        "Telefono": "922-709123",
        "CorreoElectronico": "38000965@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38000977",
        "Denominacion": "CEIP EL VALLE",
        "Municipio": "SAN ANDRÉS Y SAUCES",
        "Direccion": "C/ EL VALLE, 10",
        "Telefono": "922-450123",
        "CorreoElectronico": "38000977@gobiernodecanarias.org",
        "Isla": "LA PALMA",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "SPC",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38000989",
        "Denominacion": "CEIP EL VISO",
        "Municipio": "ARONA",
        "Direccion": "C/ EL VISO, 12",
        "Telefono": "922-592186",
        "CorreoElectronico": "38000989@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Sur",
        "aeropuerto": "TFS",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38000990",
        "Denominacion": "CEIP EMILIO NAVARRO",
        "Municipio": "SANTA CRUZ DE TENERIFE",
        "Direccion": "C/ EMILIO NAVARRO, 8",
        "Telefono": "922-478817",
        "CorreoElectronico": "38000990@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Este",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 15
    },
    {
        "Codigo": "38001002",
        "Denominacion": "CEIP ERA DE MOLINA",
        "Municipio": "VALLEHERMOSO",
        "Direccion": "C/ ERA DE MOLINA, 10",
        "Telefono": "922-800124",
        "CorreoElectronico": "38001002@gobiernodecanarias.org",
        "Isla": "LA GOMERA",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "GMZ",
        "distancia_aeropuerto_km": 25
    },
    {
        "Codigo": "38001014",
        "Denominacion": "CEIP ERNESTO CASTRO",
        "Municipio": "TACORONTE",
        "Direccion": "C/ ERNESTO CASTRO, 12",
        "Telefono": "922-560125",
        "CorreoElectronico": "38001014@gobiernodecanarias.org",
        "Isla": "TENERIFE",
        "Naturaleza": "Público",
        "Zona": "Norte",
        "aeropuerto": "TFN",
        "distancia_aeropuerto_km": 15
    }
];
        // --- FIN DE LA BASE DE DATOS DE CENTROS ---

        let currentPage = 1;
        let rowsPerPage = 25;
        let filteredData = [...schoolData];
        let sortColumn = 'distancia_aeropuerto_km';
        let sortDirection = 'asc';

        const searchInput = document.getElementById('search-input');
        const filterIsla = document.getElementById('filter-isla');
        const filterMunicipio = document.getElementById('filter-municipio');
        const filterZona = document.getElementById('filter-zona');
        const tableBody = document.getElementById('table-body');
        const paginationControls = document.getElementById('pagination-controls');
        const rowsPerPageSelect = document.getElementById('rows-per-page');
        const resultsCount = document.getElementById('results-count');
        const modal = document.getElementById('modal');
        const modalContent = document.getElementById('modal-content');
        const modalBackdrop = document.getElementById('modal-backdrop');
        const modalCloseBtn = document.getElementById('modal-close-btn');

        function initialize() {
            populateFilters();
            addEventListeners();
            sortData(sortColumn, true); 
        }

        function populateFilters() {
            const islas = [...new Set(schoolData.map(item => item.Isla))].sort();
            islas.forEach(isla => filterIsla.add(new Option(isla, isla)));
        }

        function updateDependentFilters() {
            const selectedIsla = filterIsla.value;
            
            filterMunicipio.innerHTML = '<option value="all">Todos los Municipios</option>';
            if (selectedIsla !== 'all') {
                filterMunicipio.disabled = false;
                const municipios = [...new Set(schoolData.filter(item => item.Isla === selectedIsla).map(item => item.Municipio))].sort();
                municipios.forEach(m => filterMunicipio.add(new Option(m,m)));
            } else {
                filterMunicipio.disabled = true;
            }

            filterZona.innerHTML = '<option value="all">Todas las Zonas</option>';
            if (selectedIsla !== 'all') {
                 filterZona.disabled = false;
                 const zonas = [...new Set(schoolData.filter(item => item.Isla === selectedIsla).map(item => item.Zona))].sort();
                 zonas.forEach(z => filterZona.add(new Option(z,z)));
            } else {
                 filterZona.disabled = true;
            }
        }

        function applyAllFilters() {
            const searchTerm = searchInput.value.toLowerCase();
            const selectedIsla = filterIsla.value;
            const selectedMunicipio = filterMunicipio.value;
            const selectedZona = filterZona.value;

            filteredData = schoolData.filter(item => {
                const searchMatch = (item.Denominacion.toLowerCase().includes(searchTerm) || item.Codigo.toLowerCase().includes(searchTerm));
                const islaMatch = (selectedIsla === 'all' || item.Isla === selectedIsla);
                const municipioMatch = (selectedMunicipio === 'all' || item.Municipio === selectedMunicipio);
                const zonaMatch = (selectedZona === 'all' || item.Zona === selectedZona);
                return searchMatch && islaMatch && municipioMatch && zonaMatch;
            });
            
            currentPage = 1;
            sortData(sortColumn, false); 
        }

        function sortData(column, isInitialSort = false) {
            if (!isInitialSort) {
                if (sortColumn === column) {
                    sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
                } else {
                    sortColumn = column;
                    sortDirection = 'asc';
                }
            }
            
            filteredData.sort((a, b) => {
                const valA = a[column];
                const valB = b[column];

                if (!isNaN(valA) && !isNaN(valB)) {
                    return sortDirection === 'asc' ? valA - valB : valB - valA;
                }
                
                const strA = String(valA).toLowerCase();
                const strB = String(valB).toLowerCase();

                if (strA < strB) return sortDirection === 'asc' ? -1 : 1;
                if (strA > strB) return sortDirection === 'asc' ? 1 : -1;
                return 0;
            });

            renderTable();
        }

        function renderTable() {
            tableBody.innerHTML = '';
            const start = (currentPage - 1) * rowsPerPage;
            const end = start + rowsPerPage;
            const paginatedData = filteredData.slice(start, end);

            paginatedData.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'bg-white border-b hover:bg-gray-50';
                row.innerHTML = `
                    <td class="p-4 font-medium text-gray-900">${item.Denominacion}</td>
                    <td class="p-4">${item.Municipio} (${item.Zona})</td>
                    <td class="p-4">${item.Isla}</td>
                    <td class="p-4 text-center">${item.distancia_aeropuerto_km} km</td>
                    <td class="p-4">
                        <button class="view-details-btn font-medium text-blue-600 hover:underline" data-id="${item.Codigo}">Ver Detalles</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            updateResultsCount();
            renderPagination();
            updateSortHeaders();
        }
        
        function updateResultsCount() {
            resultsCount.textContent = `Mostrando ${filteredData.length} de ${schoolData.length} resultados.`;
        }

        function renderPagination() {
            paginationControls.innerHTML = '';
            const totalPages = Math.ceil(filteredData.length / rowsPerPage);

            if (totalPages <= 1) return;

            const prevButton = document.createElement('button');
            prevButton.textContent = 'Anterior';
            prevButton.disabled = currentPage === 1;
            prevButton.className = 'px-3 py-1 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed bg-gray-200 hover:bg-gray-300';
            prevButton.addEventListener('click', () => { currentPage--; renderTable(); });
            paginationControls.appendChild(prevButton);

            const pageIndicator = document.createElement('span');
            pageIndicator.textContent = `Página ${currentPage} de ${totalPages}`;
            pageIndicator.className = 'text-sm text-gray-700';
            paginationControls.appendChild(pageIndicator);
            
            const nextButton = document.createElement('button');
            nextButton.textContent = 'Siguiente';
            nextButton.disabled = currentPage === totalPages;
            nextButton.className = 'px-3 py-1 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed bg-gray-200 hover:bg-gray-300';
            nextButton.addEventListener('click', () => { currentPage++; renderTable(); });
            paginationControls.appendChild(nextButton);
        }
        
        function updateSortHeaders() {
            document.querySelectorAll('.sortable').forEach(header => {
                header.classList.remove('sort-asc', 'sort-desc');
                if (header.dataset.column === sortColumn) {
                    header.classList.add(sortDirection === 'asc' ? 'sort-asc' : 'sort-desc');
                }
            });
        }
        
        function showModal(codigo) {
            const center = schoolData.find(c => c.Codigo === codigo);
            if (!center) return;

            document.getElementById('modal-title').textContent = center.Denominacion;
            document.getElementById('modal-body').innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700">
                    <p><strong>Código:</strong> ${center.Codigo}</p>
                    <p><strong>Naturaleza:</strong> ${center.Naturaleza}</p>
                    <p><strong>Isla:</strong> ${center.Isla}</p>
                    <p><strong>Zona:</strong> ${center.Zona || 'N/D'}</p>
                    <p class="md:col-span-2"><strong>Municipio:</strong> ${center.Municipio}</p>
                    <p class="md:col-span-2"><strong>Dirección:</strong> ${center.Direccion}</p>
                    <p><strong>Teléfono:</strong> ${center.Telefono || 'No disponible'}</p>
                    <p><strong>Email:</strong> ${center.CorreoElectronico || 'No disponible'}</p>
                    <p class="md:col-span-2"><strong>Aeropuerto cercano:</strong> ${center.aeropuerto || 'N/D'} (~${center.distancia_aeropuerto_km || '?'} km)</p>
                </div>
                <div class="mt-6 flex flex-wrap gap-2">
                    <button onclick="copyToClipboard('${center.Telefono}')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">Copiar Teléfono</button>
                    <button onclick="copyToClipboard('${center.CorreoElectronico}')" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">Copiar Email</button>
                    <a href="https://www.google.com/maps?q=${encodeURIComponent(center.Direccion + ', ' + center.Municipio)}" target="_blank" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded">Ver en Mapa</a>
                </div>
            `;
            
            modal.classList.remove('hidden');
            modalContent.classList.remove('opacity-0', 'scale-95');
        }
        
        function hideModal() {
            modalContent.classList.add('opacity-0', 'scale-95');
            setTimeout(() => modal.classList.add('hidden'), 200);
        }

        function addEventListeners() {
            searchInput.addEventListener('input', applyAllFilters);
            filterIsla.addEventListener('change', () => {
                updateDependentFilters();
                applyAllFilters();
            });
            filterMunicipio.addEventListener('change', applyAllFilters);
            filterZona.addEventListener('change', applyAllFilters);

            rowsPerPageSelect.addEventListener('change', (e) => {
                rowsPerPage = parseInt(e.target.value, 10);
                currentPage = 1;
                renderTable();
            });
            document.querySelectorAll('.sortable').forEach(header => {
                header.addEventListener('click', () => sortData(header.dataset.column));
            });
            tableBody.addEventListener('click', (e) => {
                const button = e.target.closest('.view-details-btn');
                if (button) {
                    showModal(button.dataset.id);
                }
            });
            modalCloseBtn.addEventListener('click', hideModal);
            modalBackdrop.addEventListener('click', hideModal);
        }
        
        initialize();
    });
    
    // Función global para copiar al portapapeles
    function copyToClipboard(text) {
        if (!text || text === 'No disponible') {
            alert('No hay información para copiar.');
            return;
        }
        
        const tempInput = document.createElement('input');
        tempInput.value = text;
        document.body.appendChild(tempInput);
        tempInput.select();
        try {
            document.execCommand('copy');
            alert('¡Copiado al portapapeles!');
        } catch (err) {
            console.error('Error al copiar: ', err);
            alert('No se pudo copiar.');
        }
        document.body.removeChild(tempInput);
    }
    </script>
</body>
</html>
